<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Frozen Diamond Classic</title>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body class="watermarkPage">

  <header class="siteHeader">
    <nav class="nav">
      <a href="./" class="active">Home</a>
      <a href="./schedule.html">Schedule/Scores</a>
      <a href="./standings.html">Standings</a>
      <a href="./stats.html">Stats</a>
      <a href="./teams.html">Teams</a>
      <a href="./rules.html">Rules</a>
      <a href="./contacts.html">Contacts</a>
      <a href="./gallery.html">Gallery</a>
      <a href="./uploads.html">Uploads</a>
    </nav>

    <div class="brandCenter">
      <img src="./logo.png" alt="Frozen Diamond Classic Logo" class="logoImage">
      <h1>Frozen Diamond Classic</h1>
      <div class="tagline">Tournament Central</div>
    </div>
  </header>

  <main class="wrap">

<!-- HERO: Countdown (Centered) -->
<section class="docSection">
  <div class="countdownCard centeredHero">

    <div class="countdownLabel">Tournament Day</div>

    <div id="countdown" class="countdownValue"></div>
    <div id="championBanner" class="countdownValue" style="display:none;"></div>

    <div class="muted small" style="margin-top:4px;">
      Saturday, March 21, 2026 ‚Ä¢ CenterCourt Lawrence
    </div>

    <!-- At-a-glance strip -->
    <div class="glanceStrip centeredGlance" aria-label="Tournament at a glance">
      <div class="glancePill">
        <span class="glanceNum">8</span>
        <span class="glanceLbl">Teams</span>
      </div>

      <div class="glancePill">
        <span class="glanceNum">12</span>
        <span class="glanceLbl">Games</span>
      </div>

      <div class="glancePill">
        <span class="glanceNum">2</span>
        <span class="glanceLbl">Fields</span>
      </div>

      <div class="glancePill">
        <span class="glanceNum">3</span>
        <span class="glanceLbl">Games Guaranteed</span>
      </div>
    </div>

  </div>
</section>


    <!-- Overview (tightened) -->
    <section class="docSection">
      <h2>Tournament Overview</h2>
      <div class="card">
        <div class="cardBody">
          <p style="margin-top:0;">
            The Frozen Diamond Classic is a one-day 9U baseball tournament designed to provide a competitive and fun indoor
            experience during the winter. Teams are encouraged to socialize between games. All teams are guaranteed three games, win or lose.
          </p>
        </div>
      </div>
    </section>

    <!-- Tournament Details (2-column) -->
    <section class="docSection">
      <h2>Tournament Details</h2>
      <div class="card">
        <div class="cardBody">
          <div class="detailsGrid">
            <ul class="bullets" style="margin:0;">
              <li><strong>Date:</strong> Saturday, March 21, 2026</li>
              <li><strong>Location:</strong> CenterCourt ‚Äì 1080 Spruce Street, Lawrence</li>
              <li>
                <a class="link" href="https://centercourtacademy.com/locations/lawrence/" target="_blank" rel="noopener">
                  CenterCourt Lawrence Venue Page
                </a>
              </li>
              <li>
  <a class="link" href="./rules.html">
    <strong>Rules:</strong> Standard 9U
  </a>
</li>

            </ul>

            <ul class="bullets" style="margin:0;">
              <li>
                <a class="link" href="https://docs.google.com/forms/d/e/1FAIpQLSdFvmyPqP_S-59jUxF18mxD0cQtGeV9ZeFhptzh0bym8pTPnQ/viewform" target="_blank" rel="noopener">
                  Tournament T-Shirt Order Form
                </a>
              </li>
              <li><strong>Teams:</strong> Invite only ‚Äî Town level A or strong B</li>
              <li><strong>Scoring:</strong> GameChanger Tournament ‚Äî ‚ÄúFrozen Diamond Classic 2026‚Äù</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- Rules highlights (fast scan) -->
    <section class="docSection">
      <h2>Rules Highlights</h2>
      <div class="card">
        <div class="cardBody">
          <ul class="bullets">
            <li><strong>Time Limit:</strong> No new inning after 1:40, hard stop at 1:55 (revert to last completed inning)</li>
            <li><strong>Pitching:</strong> 75 total pitches per day/tournament (avoid back-to-back games)</li>
            <li><strong>Stealing:</strong> All bases allowed; pitcher pickoffs not allowed; catcher pickoffs allowed</li>
            <li><strong>Sliding:</strong> Feet-first only</li>
            <li><strong>Dropped 3rd strike:</strong> Not in effect</li>
          </ul>
          <p style="margin-bottom:0;">
            <a class="link" href="./rules.html">View full rules ‚Üí</a>
          </p>
        </div>
      </div>
    </section>

    <!-- Participating Teams -->
    <section class="docSection">
      <h2>Participating Teams</h2>
      <div class="card">
        <div class="cardBody">
          <div class="teamsGrid">
            <a class="teamTile" href="./team.html?team=south-orange-maplewood">South Orange Maplewood</a>
            <a class="teamTile" href="./team.html?team=watchung-hills">Watchung Hills</a>
            <a class="teamTile" href="./team.html?team=branchburg">Branchburg</a>
            <a class="teamTile" href="./team.html?team=ridge">Ridge 9U Green</a>
            <a class="teamTile" href="./team.html?team=scotch-plains-fanwood">Scotch Plains Fanwood</a>
            <a class="teamTile" href="./team.html?team=hillsborough">Hillsborough</a>
            <a class="teamTile" href="./team.html?team=westfield-white">Westfield White</a>
            <a class="teamTile" href="./team.html?team=westfield-blue">Westfield Blue</a>
          </div>
        </div>
      </div>
    </section>

    <!-- Directions -->
    <section class="docSection">
      <h2>Directions</h2>
      <div class="card">
        <div class="cardBody">

          <p class="muted small" style="margin-top:0;">
            CenterCourt ‚Äì 1080 Spruce Street, Lawrence
          </p>

          <div class="mapEmbed">
            <iframe
              src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d6090.512546295843!2d-74.75651128824809!3d40.2478355657823!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x89c1586aed486f57%3A0xfd6b3fd60c1f1f1d!2sCentercourt%20Lawrence!5e0!3m2!1sen!2sus!4v1771091548040!5m2!1sen!2sus"
              loading="lazy"
              allowfullscreen
              referrerpolicy="no-referrer-when-downgrade">
            </iframe>
          </div>

          <div class="dirActions">
            <a class="qaBtn primary" href="https://www.google.com/maps/dir/?api=1&destination=Centercourt+Lawrence" target="_blank" rel="noopener">
              Get Directions
            </a>
            <button class="qaBtn" type="button" id="copyAddressBtn">
              Copy Address
            </button>
          </div>

        </div>
      </div>
    </section>

    <!-- Facility Information -->
    <section class="docSection">
      <h2>Facility Information</h2>
      <div class="card">
        <div class="cardBody">
          <ul class="bullets">
            <li><strong>Climate:</strong> It can get cool ‚Äî dress appropriately (long sleeve under jersey recommended).</li>
            <li><strong>Chairs:</strong> No bleachers available ‚Äî bring your own chairs or blankets.</li>
            <li>Teams may bring coolers with snacks and drinks.</li>
            <li>Picnic-style tables available between games.</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- Food -->
    <section class="docSection">
      <h2>Food</h2>
      <div class="card">
        <div class="cardBody">
          <ul class="bullets">
            <li>Food trucks + vending machines + water refill station available </li>
            <li>Delivery Availble - Ruben‚Äôs Pizza ‚Äî 2191 Spruce Street ‚Äî (609) 883-6637 </li>
            <li>Wendy‚Äôs ‚Ä¢ Burger King ‚Ä¢ McDonald‚Äôs ‚Ä¢ WingStop ‚Ä¢ QuickChek (‚âà 5 minutes away)</li>
          </ul>
        </div>
      </div>
    </section>

  </main>

  <script src="./data.js"></script>

  <!-- Countdown Script (your original) -->
  <script>
    const targetDate = new Date("March 21, 2026 08:00:00").getTime();
    const countdownEl = document.getElementById("countdown");

    function updateCountdown() {
      const now = new Date().getTime();
      const distance = targetDate - now;

      if (distance <= 0) {
        countdownEl.innerHTML = "Tournament Day Is Here!";
        return;
      }

      const days = Math.floor(distance / (1000 * 60 * 60 * 24));
      const hours = Math.floor((distance / (1000 * 60 * 60)) % 24);
      const minutes = Math.floor((distance / (1000 * 60)) % 60);

      countdownEl.innerHTML = `${days} Days ‚Ä¢ ${hours} Hours ‚Ä¢ ${minutes} Minutes`;
    }

    updateCountdown();
    setInterval(updateCountdown, 60000);
  </script>

  <!-- Champion Swap Script (replaces countdown after all games Final) -->
  <script>
    (async function(){
      const championEl = document.getElementById("championBanner");
      const countdownEl = document.getElementById("countdown");

      function safe(v){ return String(v ?? "").trim(); }
      function isFinal(s){ return safe(s).toLowerCase() === "final"; }
      function toNum(x){ const n = Number(safe(x)); return Number.isFinite(n) ? n : null; }

      async function fetchCsv(url){
        if (!url) throw new Error("Missing CSV URL in data.js");
        const bust = (url.includes("?") ? "&" : "?") + "t=" + Date.now();
        const res = await fetch(url + bust, { cache: "no-store" });
        if (!res.ok) throw new Error(`Failed to fetch CSV (${res.status})`);
        return await res.text();
      }

      // Robust CSV parser (handles quoted commas)
      function parseCsv(text) {
        const rows = [];
        let row = [];
        let cur = "";
        let inQuotes = false;

        for (let i = 0; i < text.length; i++) {
          const ch = text[i];
          const next = text[i + 1];

          if (ch === '"') {
            if (inQuotes && next === '"') { cur += '"'; i++; }
            else inQuotes = !inQuotes;
            continue;
          }

          if (!inQuotes && ch === ",") { row.push(cur); cur = ""; continue; }

          if (!inQuotes && (ch === "\n" || ch === "\r")) {
            if (ch === "\r" && next === "\n") i++;
            row.push(cur); cur = "";
            if (row.some(v => safe(v) !== "")) rows.push(row);
            row = [];
            continue;
          }

          cur += ch;
        }

        row.push(cur);
        if (row.some(v => safe(v) !== "")) rows.push(row);

        const headers = (rows.shift() || []).map(h => safe(h).replace(/\s+/g,""));
        return rows.map(r => {
          const obj = {};
          headers.forEach((h, idx) => obj[h] = safe(r[idx]));
          return obj;
        });
      }

      function allGamesFinal(gameRows){
        const withIds = gameRows.filter(g => safe(g.Game) !== "");
        return withIds.length >= 12 && withIds.every(g =>
          isFinal(g.Status) && toNum(g.ScoreA) !== null && toNum(g.ScoreB) !== null
        );
      }

      function winnerLoser(game) {
        if (!isFinal(game.Status)) return null;
        const a = toNum(game.ScoreA);
        const b = toNum(game.ScoreB);
        if (a === null || b === null) return null;
        if (a === b) return null;
        return a > b ? { W: game.TeamA, L: game.TeamB } : { W: game.TeamB, L: game.TeamA };
      }

      function resolveTeamRef(ref, teamsBySeed, gamesById) {
        if (!ref) return "TBD";
        ref = safe(ref).toUpperCase();
        if (!ref) return "TBD";

        const type = ref[0];
        const num = Number(ref.slice(1));
        if (!Number.isFinite(num)) return "TBD";

        if (type === "S") return teamsBySeed.get(num) || "TBD";

        const g = gamesById.get(num);
        if (!g) return "TBD";

        const wl = winnerLoser(g);
        if (!wl) return "TBD";

        return resolveTeamRef(type === "W" ? wl.W : wl.L, teamsBySeed, gamesById);
      }

      try {
        const [teamsText, gamesText] = await Promise.all([
          fetchCsv(window.SHEET?.TEAMS_CSV_URL),
          fetchCsv(window.SHEET?.GAMES_CSV_URL)
        ]);

        const teamRows = parseCsv(teamsText);
        const gameRows = parseCsv(gamesText);

        if (!allGamesFinal(gameRows)) return;

        const teamsBySeed = new Map(
          teamRows
            .map(r => [Number(r.Seed), safe(r.TeamName)])
            .filter(([s,n]) => Number.isFinite(s) && n)
        );

        const gamesById = new Map(
          gameRows
            .map(r => [Number(r.Game), r])
            .filter(([id]) => Number.isFinite(id))
        );

        const g12 = gamesById.get(12);
        if (!g12) return;

        const a = toNum(g12.ScoreA);
        const b = toNum(g12.ScoreB);
        if (a === null || b === null || a === b) return;

        const teamAName = resolveTeamRef(g12.TeamA, teamsBySeed, gamesById);
        const teamBName = resolveTeamRef(g12.TeamB, teamsBySeed, gamesById);

        const championName = a > b ? teamAName : teamBName;

        if (countdownEl) countdownEl.style.display = "none";
        if (championEl){
          championEl.style.display = "block";
          championEl.innerHTML = `üèÜ Champion: ${championName}`;
        }
      } catch (e) {
        console.error(e);
      }
    })();
  </script>

  <!-- Small, isolated polish CSS (safe: only new classes) -->
  <style>
    .countdownTopRow{
      display:flex;
      gap:14px;
      align-items:flex-start;
      justify-content:space-between;
    }
    .quickActions{
      display:grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap:8px;
      min-width: 280px;
    }
    .qaBtn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      text-decoration:none;
      border:1px solid rgba(0,0,0,0.10);
      background:#fff;
      padding:10px 12px;
      border-radius:12px;
      font-weight:900;
      font-size:13px;
      color: var(--text, #0f172a);
      transition: transform 0.12s ease, border-color 0.12s ease, box-shadow 0.12s ease;
      cursor:pointer;
      white-space:nowrap;
    }
    .qaBtn:hover{
      transform: translateY(-1px);
      border-color: rgba(37,99,235,0.35);
      box-shadow: 0 10px 24px rgba(2,6,23,0.10);
    }
    .qaBtn.primary{
      background: rgba(37,99,235,0.14);
      border-color: rgba(37,99,235,0.30);
    }

    .glanceStrip{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      margin-top:12px;
    }
    .glancePill{
      display:flex;
      align-items:baseline;
      gap:8px;
      padding:8px 10px;
      border-radius:999px;
      border:1px solid rgba(0,0,0,0.10);
      background: rgba(255,255,255,0.85);
    }
    .glanceNum{
      font-weight: 900;
      font-size: 14px;
      color: var(--text, #0f172a);
    }
    .glanceLbl{
      font-weight: 800;
      font-size: 12px;
      color: var(--muted, #64748b);
    }

    .detailsGrid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 14px;
    }

    .contactGrid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }
    .contactCard{
      border: 1px solid rgba(0,0,0,0.08);
      background: rgba(255,255,255,0.85);
      border-radius: 14px;
      padding: 12px;
    }
    .contactTitle{
      font-size: 12px;
      font-weight: 900;
      color: var(--muted, #64748b);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    .contactName{
      margin-top: 4px;
      font-size: 16px;
      font-weight: 900;
      color: var(--text, #0f172a);
    }
    .contactMeta{
      margin-top: 6px;
      font-size: 13px;
      font-weight: 800;
      color: var(--text, #0f172a);
    }
    .dotSep{ margin: 0 8px; color: var(--muted, #64748b); }

    .dirActions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top: 12px;
    }

    /* Mobile: keep buttons usable */
    @media (max-width: 820px){
      .countdownTopRow{ flex-direction: column; }
      .quickActions{ min-width: unset; width: 100%; grid-template-columns: repeat(2, 1fr); }
      .detailsGrid{ grid-template-columns: 1fr; }
      .contactGrid{ grid-template-columns: 1fr; }
    }
  </style>

  <script>
    // Copy address button
    (function(){
      const btn = document.getElementById("copyAddressBtn");
      if (!btn) return;
      btn.addEventListener("click", async () => {
        try{
          await navigator.clipboard.writeText("CenterCourt ‚Äì 1080 Spruce Street, Lawrence");
          btn.textContent = "Copied ‚úì";
          setTimeout(()=> btn.textContent = "Copy Address", 1500);
        } catch(e){
          alert("Copy failed. You can manually copy: 1080 Spruce Street, Lawrence");
        }
      });
    })();
  </script>

</body>
</html>


